import { useEffect, useRef, useState } from "react"
import { Context } from "src/context"
import { useContext } from "react"
import { motion } from "framer-motion"
import scrollToAnchor from 'src/components/Section/ScrollToAnchor.js'


let roadmap_lines = null

function setting_lines(page_index) {
    let roadmap_pass = roadmap_lines.slice(0, page_index)
    window.requestAnimationFrame( () => {
        roadmap_lines.forEach( (line) => {line.classList.remove("roadmap_passed_lines")} )

        roadmap_pass.forEach( (line) => { line.classList.add("roadmap_passed_lines") } )
    })
}

function check_roadmap_exist() { return window.innerWidth >= 1400 }

export default function RoadMapPage({ content_id, page_title, last_page = false})
{
    const { viewpart_of_last_page } = useContext(Context)
    const [bulb_state, bulb_state_changer] = useState(false)
    
    const [last_bulb, setLastBulbColor] = useState(false);
    const bulb_ref = useRef(null)
    
    const [last_text, setLastTextColor] = useState(false);
    const text_ref = useRef(null)
    
    const [last_line, setLastLineColor] = useState(false);
    const line_ref = useRef(null)

    useEffect( () => {
        if (!check_roadmap_exist()) { return }
        
        let page = document.querySelector(content_id)
        if (roadmap_lines == null) {
            roadmap_lines = Array.from(document.querySelectorAll(".roadmap_lines"))
        }
        
        const observer = new IntersectionObserver( (entries) => {
            if (entries[0].isIntersecting) {
                bulb_state_changer(true)
                setting_lines(Number(entries[0].target.getAttribute("data-index")))
            }
            else { bulb_state_changer(false) }
        }, {rootMargin: '-49.975% 0px -49.975% 0px'})
        observer.observe(page)
    }, [])

    useEffect( () => {
        if (!check_roadmap_exist()) { return }

        viewpart_of_last_page > (window.innerHeight - bulb_ref.current.getBoundingClientRect().top) ? setLastBulbColor(true) : setLastBulbColor(false)
        
        viewpart_of_last_page > (window.innerHeight - text_ref.current.getBoundingClientRect().top) ? setLastTextColor(true) : setLastTextColor(false)
        
        if (line_ref.current) {
            viewpart_of_last_page > (window.innerHeight - line_ref.current.getBoundingClientRect().top) ? setLastLineColor(true) : setLastLineColor(false)
        }
    }, [viewpart_of_last_page])

    return (
        <div className={last_page ? "last_roadmap roadmap_div" : "roadmap_div"}>
            <motion.figure className={last_bulb ? "roadmap_wrapper last_roadmap_wrapper" : "roadmap_wrapper"}
            onClick={ () => { scrollToAnchor(content_id) } }
            initial= { {
                '--pseudo_transform_value': "scale(0.0)",
                '--pseudo_border_radius_value': "50%"
            } }
            whileHover={ {
                '--pseudo_transform_value': "scale(1.0)",
                '--pseudo_border_radius_value': "15px",
                transition: {ease: 'easeOut', duration: 0.25}
            } }
            whileTap={ {
                '--pseudo_transform_value': "scale(1.0)",
                '--pseudo_border_radius_value': "15px",
                transition: {ease: 'easeOut', duration: 0.025}
            } }>
                <svg className={last_bulb ? "roadmap_bulb last_bulb": "roadmap_bulb"}
                viewBox="-861.414 638.8366 799.5084 902.3627"
                ref={bulb_ref}>
                    <clipPath id = "path_bulb">
                        <path d="M 1379.348 1322.329 C 1378.123 1326.654 1375.529 1328.817 1371.565 1328.817 L 1234.819 1328.817 C 1230.855 1328.817 1228.261 1326.654 1227.036 1322.329 L 1191.019 1195.134 C 1129.081 1156.05 1090.419 1083.652 1095.675 1000.8 C 1103.561 876.471 1207.356 775.683 1327.508 775.683 C 1447.66 775.683 1538.669 876.471 1530.783 1000.8 C 1525.673 1081.353 1480.302 1152.025 1416.307 1191.805 Z M 1173.038 886.692 L 1158.093 905.685 L 1142.836 933.863 L 1131.316 970.448 L 1126.769 1000.263 L 1129.288 1005.504 L 1134.327 1007.418 L 1138.157 1006.31 L 1141.281 1002.581 L 1143.801 989.278 L 1147.731 969.525 L 1152.67 951.183 L 1157.91 938.35 L 1165.771 923.032 L 1174.438 909.729 L 1184.214 898.128 L 1193.184 889.238 L 1200.037 882.127 L 1199.936 876.987 L 1197.517 873.661 L 1193.99 872.251 L 1188.139 873.615 Z M 1365.83 1228.404 L 1368.789 1219.798 L 1373.137 1208.933 L 1377.881 1198.346 L 1382.282 1189.67 L 1388.055 1178.836 L 1394.514 1168.858 L 1401.716 1160.227 L 1409.318 1152.428 L 1416.372 1147.11 L 1423.847 1142.995 L 1432.203 1138.501 L 1439.085 1134.826 L 1446.314 1129.635 L 1452.717 1123.474 L 1459.927 1114.816 L 1464.841 1106.738 L 1468.566 1099.144 L 1471.527 1091.461 L 1472.613 1086.636 L 1471.696 1082.289 L 1468.39 1079.122 L 1465.5 1078.399 L 1462.36 1079.122 L 1459.999 1080.983 L 1457.665 1085.04 L 1455.025 1091.541 L 1452.664 1097.015 L 1448.274 1104.39 L 1445.372 1108.341 L 1442.548 1111.577 L 1438.155 1115.791 L 1431.142 1121.182 L 1423.67 1125.754 L 1415.14 1130.203 L 1406.349 1135.142 L 1398.34 1140.841 L 1391.786 1146.919 L 1385.486 1154.862 L 1377.053 1167.584 L 1368.808 1181.998 L 1363.874 1191.443 L 1359.823 1200.232 L 1355.359 1211.413 L 1351.995 1221.126 L 1350.175 1227.855 L 1349.504 1232.777 L 1349.816 1235.469 L 1350.831 1237.732 L 1352.762 1239.274 L 1355.142 1240.132 L 1357.463 1240.405 L 1359.765 1239.488 L 1361.964 1237.304 L 1362.205 1236.897 Z"/>
                    </clipPath>
                            
                    <g transform="matrix(1, 0, 0, 1, -1765.6076923252297, 38.43635234886932)">
                        <path d="M 1302.54 601.672 C 1298.747 604.585 1298.68 605.753 1299.696 651.497 C 1300.799 701.138 1300.603 699.948 1307.992 701.821 C 1311.051 702.596 1312.122 702.413 1314.396 700.725 C 1319.823 696.696 1319.817 696.745 1319.111 659.89 C 1318.753 641.19 1318.122 621.206 1317.709 615.481 C 1317.013 605.839 1316.757 604.899 1314.237 602.731 C 1311.224 600.139 1305.242 599.597 1302.54 601.672 M 1147.427 645.436 C 1144.691 648.172 1144.431 648.96 1144.865 653.186 C 1145.131 655.773 1148.281 665.315 1151.864 674.39 C 1155.447 683.465 1160.939 698.63 1164.069 708.089 C 1167.199 717.549 1170.635 726.402 1171.705 727.762 C 1174.299 731.06 1178.663 731.94 1182.524 729.943 C 1186.059 728.115 1187.627 725.618 1187.627 721.817 C 1187.627 716.949 1177.208 685.795 1165.658 656.124 C 1162.256 647.386 1160.926 645.079 1158.597 643.874 C 1154.142 641.571 1150.829 642.034 1147.427 645.436 M 1445.739 649.14 C 1443.876 650.894 1440.765 656.777 1437.146 665.39 C 1434.026 672.815 1427.458 686.379 1422.55 695.533 C 1417.642 704.687 1413.627 713.384 1413.627 714.86 C 1413.627 718.787 1418.592 723.39 1422.828 723.39 C 1424.672 723.39 1427.199 722.677 1428.443 721.807 C 1429.77 720.877 1436.228 709.18 1444.079 693.485 C 1451.436 678.78 1458.552 665.43 1459.893 663.819 C 1465.284 657.34 1465.684 653.253 1461.379 648.64 C 1459.71 646.853 1458.186 646.39 1453.968 646.39 C 1449.55 646.39 1448.168 646.852 1445.739 649.14 M 1585.946 679.461 C 1584.197 680.582 1581.437 683.612 1579.812 686.194 C 1578.188 688.777 1570.415 701.015 1562.54 713.39 C 1554.664 725.765 1542.462 745.514 1535.424 757.276 C 1521.456 780.618 1520.656 782.987 1525.021 788.062 C 1528.227 791.788 1534.323 791.963 1538.078 788.436 C 1539.488 787.112 1547.031 775.422 1554.841 762.459 C 1562.651 749.496 1575.688 728.593 1583.813 716.008 C 1591.94 703.421 1598.872 691.603 1599.221 689.741 C 1600.055 685.295 1598.066 680.669 1594.536 678.843 C 1590.861 676.943 1589.754 677.022 1585.946 679.461 M 996.127 704.551 C 992.706 706.432 990.672 709.743 990.649 713.469 C 990.623 717.724 995.891 724.974 1013.116 744.39 C 1027.71 760.839 1034.958 770.266 1039.811 779.108 C 1043.344 785.545 1060.509 806.999 1065.839 811.64 C 1071.041 816.17 1080.627 811.34 1080.627 804.189 C 1080.627 800.255 1079.396 798.28 1071.089 788.89 C 1063.715 780.554 1054.026 767.243 1053.058 764.12 C 1052.332 761.774 1046.246 754.281 1025.662 730.39 C 1018.791 722.415 1012 713.64 1010.571 710.89 C 1007.006 704.031 1001.482 701.606 996.127 704.551 M 1299.627 770.046 C 1270.301 773.619 1251.788 778.866 1224.615 791.309 C 1192.634 805.954 1185.53 810.672 1160.719 833.745 C 1134.357 858.261 1116.97 881.63 1102.577 911.89 C 1088.241 942.03 1083.097 967.352 1083.175 1007.39 C 1083.265 1053.331 1088.84 1075.608 1108.283 1107.715 C 1120.895 1128.543 1125.856 1135.348 1137.072 1147.211 C 1149.488 1160.342 1156.073 1168.238 1160.584 1175.4 C 1162.485 1178.42 1166.589 1184.04 1169.704 1187.89 C 1179.469 1199.96 1195.442 1229.037 1202.101 1246.863 C 1207.188 1260.482 1210.886 1278.256 1212.093 1294.89 C 1212.846 1305.264 1216.345 1330.821 1217.672 1335.634 C 1219.125 1340.906 1223.041 1342.798 1230.493 1341.828 C 1233.592 1341.425 1256.602 1341.046 1281.627 1340.986 C 1314.003 1340.909 1328.681 1340.519 1332.513 1339.634 C 1339.699 1337.975 1353.222 1338.09 1363.444 1339.898 C 1369.642 1340.994 1372.912 1341.111 1376.279 1340.356 C 1382.098 1339.052 1388.294 1335.88 1389.528 1333.574 C 1390.061 1332.579 1390.499 1327.293 1390.502 1321.828 C 1390.508 1309.307 1392.827 1293.587 1397.132 1276.89 C 1404.345 1248.909 1415.053 1227.997 1433.279 1206.292 C 1437.622 1201.121 1444.06 1193.065 1447.587 1188.39 C 1451.114 1183.715 1458.099 1175.165 1463.109 1169.39 C 1488.847 1139.727 1501.188 1122.168 1512.568 1099.021 C 1520.894 1082.085 1523.484 1074.411 1528.069 1053.086 C 1539.794 998.554 1539.456 952.377 1527.025 910.39 C 1521.633 892.178 1514.925 876.991 1507.369 865.89 C 1499.814 854.789 1480.624 831.506 1474.819 826.396 C 1466.01 818.641 1445.575 804.052 1435.846 798.57 C 1416.6 787.726 1388.156 776.696 1368.127 772.31 C 1359.406 770.4 1354.609 770.088 1330.627 769.869 C 1315.502 769.732 1301.552 769.811 1299.627 770.046 M 1302.548 785.441 C 1295.307 785.962 1289.627 787.025 1284.548 788.811 C 1280.466 790.247 1271.56 793.285 1264.756 795.563 C 1250.805 800.235 1227.084 811.603 1202.627 825.339 C 1179.885 838.112 1175.312 841.547 1158.075 858.813 C 1140.272 876.644 1131.967 888.364 1119.311 913.513 C 1103.548 944.837 1098.577 967.595 1098.583 1008.399 C 1098.589 1051.145 1104.596 1072.86 1125.69 1106.39 C 1134.566 1120.499 1141.319 1129.128 1153.511 1141.937 C 1176.253 1165.831 1199.946 1202.1 1213.906 1234.39 C 1221.842 1252.744 1223.707 1261.138 1229.133 1302.89 C 1230.563 1313.89 1232.271 1323.42 1232.93 1324.068 C 1233.805 1324.929 1246.344 1325.31 1279.627 1325.486 C 1318.595 1325.691 1326.402 1325.486 1334.008 1324.058 C 1344.736 1322.043 1350.066 1322.007 1358.627 1323.89 C 1373.021 1327.056 1375.576 1325.751 1373.94 1316.072 C 1373.055 1310.832 1373.251 1307.949 1375.23 1297.156 C 1379.48 1273.97 1382.043 1265.591 1394.785 1233.226 C 1407.239 1201.591 1415.647 1188.802 1435.093 1171.912 C 1446.905 1161.653 1456.619 1151.501 1463.221 1142.514 C 1466.434 1138.142 1470.353 1133.802 1471.93 1132.87 C 1475.537 1130.739 1491.163 1107.267 1497.88 1093.89 C 1504.731 1080.244 1507.218 1073.306 1511.253 1056.571 C 1517.722 1029.747 1519.762 1013.774 1520.348 985.362 C 1520.917 957.734 1520.29 949.837 1515.98 930.39 C 1510.695 906.54 1501.256 884.093 1490.485 869.76 C 1475.499 849.817 1469.384 842.447 1464.015 837.859 C 1440.793 818.017 1426.238 809.396 1394.953 796.952 C 1367.138 785.889 1341.209 782.659 1302.548 785.441 M 1620.338 826.464 C 1609.974 831.766 1590.431 839.085 1577.95 842.339 C 1572.069 843.872 1568.237 848.576 1568.994 853.335 C 1569.684 857.673 1573.666 861.39 1577.625 861.39 C 1579.212 861.39 1585.824 859.79 1592.319 857.835 C 1616.71 850.491 1639.382 839.698 1642.31 834.036 C 1645.353 828.152 1641.024 820.359 1634.742 820.412 C 1633.304 820.424 1626.822 823.148 1620.338 826.464 M 943.93 845.587 C 941.048 846.979 938.311 852.794 939.186 855.666 C 939.559 856.889 940.598 858.73 941.495 859.756 C 943.605 862.168 1011.962 896.39 1014.671 896.39 C 1022.903 896.39 1027.198 886.081 1021.276 880.536 C 1018.051 877.517 951.185 844.38 948.474 844.458 C 947.183 844.495 945.138 845.003 943.93 845.587 M 1692.174 946.176 C 1691.861 946.489 1668.446 946.778 1640.14 946.818 L 1588.675 946.89 L 1585.924 949.64 C 1582.029 953.533 1582.043 959.631 1585.955 962.996 L 1588.739 965.39 L 1619.433 965.64 C 1657.676 965.951 1684.258 965.668 1692.313 964.863 C 1701.894 963.905 1705.902 958.477 1702.517 951.047 C 1701.079 947.892 1693.858 944.492 1692.174 946.176 M 1007.127 996.481 C 997.227 996.904 977.427 997.495 963.127 997.794 C 929.886 998.489 911.073 999.868 908.08 1001.829 C 902.904 1005.22 902.897 1013.555 908.067 1016.943 C 910.372 1018.453 912.933 1018.502 936.862 1017.495 C 951.308 1016.887 970.374 1016.389 979.23 1016.39 C 1006.281 1016.39 1035.545 1014.552 1038.766 1012.649 C 1044.747 1009.116 1044.647 1000.003 1038.593 996.873 C 1035.529 995.288 1035.129 995.283 1007.127 996.481 M 1548.704 1069.979 C 1546.248 1072.045 1545.627 1073.346 1545.627 1076.423 C 1545.627 1081.827 1547.663 1083.659 1565.627 1094.409 C 1584.396 1105.642 1601.852 1116.967 1622.978 1131.616 C 1641.543 1144.489 1644.637 1145.534 1649.579 1140.592 C 1651.895 1138.276 1652.627 1136.641 1652.627 1133.787 C 1652.627 1130.61 1651.917 1129.369 1648.029 1125.747 C 1643.942 1121.942 1569.419 1073.682 1560.666 1069.173 C 1555.87 1066.703 1552.312 1066.943 1548.704 1069.979 M 1057.385 1132.508 C 1052.237 1137.505 1029.275 1155.304 1009.887 1169.326 C 989.431 1184.121 985.613 1188.944 988.9 1195.836 C 990.688 1199.586 995.386 1201.918 999.216 1200.957 C 1000.662 1200.594 1004.158 1198.136 1006.986 1195.495 C 1009.814 1192.853 1017.302 1186.946 1023.627 1182.368 C 1044.256 1167.436 1067.031 1149.971 1070.87 1146.14 C 1074.112 1142.904 1074.627 1141.767 1074.627 1137.842 C 1074.627 1131.922 1071.21 1128.39 1065.482 1128.39 C 1062.322 1128.39 1060.866 1129.131 1057.385 1132.508 M 1492.127 1188.551 C 1486.749 1191.508 1485.284 1196.892 1488.281 1202.69 C 1489.191 1204.45 1503.735 1219.84 1520.602 1236.89 C 1537.469 1253.94 1553.95 1271.49 1557.227 1275.89 C 1562.88 1283.48 1563.402 1283.906 1567.424 1284.198 C 1571.015 1284.46 1572.121 1284.05 1574.646 1281.525 C 1581.102 1275.069 1577.593 1268.672 1553.821 1243.561 C 1525.27 1213.402 1502.327 1190.302 1499.427 1188.794 C 1496.219 1187.126 1494.803 1187.079 1492.127 1188.551 M 1119.827 1205.962 C 1118.593 1206.827 1116.289 1210.089 1114.708 1213.212 C 1113.127 1216.335 1104.746 1231.04 1096.083 1245.89 C 1087.421 1260.74 1077.925 1277.029 1074.98 1282.087 C 1068.508 1293.207 1068.059 1296.893 1072.704 1300.801 C 1078.268 1305.483 1084.258 1304.013 1087.756 1297.107 C 1088.931 1294.787 1099.339 1276.925 1110.885 1257.411 C 1122.431 1237.898 1132.488 1220.202 1133.234 1218.086 C 1134.38 1214.838 1134.377 1213.728 1133.215 1210.946 C 1130.694 1204.914 1124.576 1202.636 1119.827 1205.962 M 1286.627 1353.962 C 1285.802 1354.149 1268.927 1355.26 1249.127 1356.431 C 1222.649 1357.997 1212.537 1358.937 1210.895 1359.986 C 1209.667 1360.771 1206.595 1364.895 1204.069 1369.151 C 1199.524 1376.806 1199.481 1376.966 1200.022 1383.89 C 1200.543 1390.558 1200.385 1391.246 1196.697 1398.39 C 1189.955 1411.451 1189.668 1416.72 1195.333 1423.452 C 1197.709 1426.276 1197.849 1426.886 1196.794 1429.804 C 1193.957 1437.65 1197.144 1447.062 1204.383 1452.217 C 1207.932 1454.743 1221.576 1461.39 1223.214 1461.39 C 1223.843 1461.39 1225.543 1462.323 1226.992 1463.463 C 1229.096 1465.117 1229.623 1466.377 1229.607 1469.713 C 1229.596 1472.01 1231.044 1478.577 1232.826 1484.305 C 1236.443 1495.934 1239.996 1500.605 1246.575 1502.376 C 1249.001 1503.029 1268.808 1502.856 1306.168 1501.854 C 1370.966 1500.117 1386.065 1499.249 1390.394 1497.01 C 1397.319 1493.43 1400.166 1486.103 1401.129 1469.39 C 1401.98 1454.611 1401.759 1455.131 1408.76 1451.4 C 1423.997 1443.278 1428.752 1434.634 1424.66 1422.488 C 1422.145 1415.022 1422.129 1413.727 1424.538 1412.438 C 1425.588 1411.875 1427.459 1409.78 1428.694 1407.781 C 1432.959 1400.88 1430.464 1390.418 1423.237 1384.906 C 1419.91 1382.368 1419.82 1382.11 1419.478 1374.011 C 1419.174 1366.831 1418.743 1365.162 1416.265 1361.588 C 1414.639 1359.242 1411.59 1356.582 1409.2 1355.425 C 1405.109 1353.445 1403.413 1353.393 1346.561 1353.506 C 1314.422 1353.57 1287.452 1353.775 1286.627 1353.962 M 1306.127 1368.044 C 1274.578 1369.344 1223.072 1372.686 1221.158 1373.558 C 1219.881 1374.14 1217.876 1375.915 1216.702 1377.503 L 1214.568 1380.389 L 1219.097 1383.582 C 1222.914 1386.272 1223.627 1387.296 1223.627 1390.083 C 1223.627 1393.536 1220.767 1397.39 1218.204 1397.39 C 1215.892 1397.39 1210.695 1402.337 1208.513 1406.613 C 1206.31 1410.932 1206.588 1413.39 1209.28 1413.39 C 1212.623 1413.39 1219.197 1417.392 1221.074 1420.57 L 1222.977 1423.792 L 1216.563 1429.6 C 1208.765 1436.663 1208.922 1437.243 1220.164 1442.89 L 1228.127 1446.89 L 1251.627 1446.802 C 1276.123 1446.709 1294.42 1445.628 1325.627 1442.429 C 1335.802 1441.386 1355.48 1440.284 1369.355 1439.979 C 1391.412 1439.495 1395.372 1439.161 1400.855 1437.322 C 1408.662 1434.703 1410.627 1432.991 1410.627 1428.806 C 1410.627 1422.734 1410.302 1422.658 1381.915 1422.124 C 1352.311 1421.568 1325.989 1418.679 1321.627 1415.508 C 1317.827 1412.746 1317.678 1407.29 1321.323 1404.386 C 1323.936 1402.305 1324.81 1402.192 1334.127 1402.74 C 1339.627 1403.064 1350.202 1404.24 1357.627 1405.355 C 1372.478 1407.584 1398.428 1408.128 1404.846 1406.346 C 1408.897 1405.221 1414.627 1400.927 1414.627 1399.017 C 1414.627 1398.359 1413.388 1397.089 1411.874 1396.195 C 1409.718 1394.921 1408.144 1394.757 1404.624 1395.436 C 1402.15 1395.913 1393.244 1396.322 1384.832 1396.346 C 1369.898 1396.389 1369.478 1396.332 1367.082 1393.935 C 1364.076 1390.93 1363.763 1385.482 1366.456 1383.045 C 1367.983 1381.663 1370.711 1381.39 1383.005 1381.39 C 1399.139 1381.39 1403.09 1380.376 1404.201 1375.951 C 1405.455 1370.956 1404.525 1369.935 1398.114 1369.26 C 1391.147 1368.526 1317.921 1367.559 1306.127 1368.044 M 1347.127 1455.046 C 1344.927 1455.234 1339.752 1455.84 1335.627 1456.392 C 1327 1457.548 1279.883 1460.957 1258.942 1461.941 C 1248.75 1462.42 1244.617 1462.973 1244.26 1463.904 C 1243.469 1465.965 1246.25 1477.676 1248.798 1483.012 L 1251.127 1487.89 L 1259.988 1487.539 C 1264.862 1487.346 1272.442 1487.772 1276.833 1488.485 C 1283.981 1489.646 1286.716 1489.55 1302.972 1487.571 C 1316.191 1485.962 1326.293 1485.381 1340.127 1485.433 C 1365.195 1485.527 1382.659 1484.066 1384.367 1481.731 C 1385.148 1480.663 1385.673 1476.377 1385.749 1470.449 C 1385.816 1465.191 1385.928 1459.54 1385.999 1457.89 L 1386.127 1454.89 L 1368.627 1454.797 C 1359.002 1454.746 1349.327 1454.858 1347.127 1455.046" fillRule="evenodd"/>

                        <path className = {bulb_state ? 'current_lines' : ''} 
                        d="M 1379.348 1322.329 M 1173.038 886.692 L 1158.093 905.685 L 1142.836 933.863 L 1131.316 970.448 L 1126.769 1000.263 L 1129.288 1005.504 L 1134.327 1007.418 L 1138.157 1006.31 L 1141.281 1002.581 L 1143.801 989.278 L 1147.731 969.525 L 1152.67 951.183 L 1157.91 938.35 L 1165.771 923.032 L 1174.438 909.729 L 1184.214 898.128 L 1193.184 889.238 L 1200.037 882.127 L 1199.936 876.987 L 1197.517 873.661 L 1193.99 872.251 L 1188.139 873.615 Z M 1365.83 1228.404 L 1368.789 1219.798 L 1373.137 1208.933 L 1377.881 1198.346 L 1382.282 1189.67 L 1388.055 1178.836 L 1394.514 1168.858 L 1401.716 1160.227 L 1409.318 1152.428 L 1416.372 1147.11 L 1423.847 1142.995 L 1432.203 1138.501 L 1439.085 1134.826 L 1446.314 1129.635 L 1452.717 1123.474 L 1459.927 1114.816 L 1464.841 1106.738 L 1468.566 1099.144 L 1471.527 1091.461 L 1472.613 1086.636 L 1471.696 1082.289 L 1468.39 1079.122 L 1465.5 1078.399 L 1462.36 1079.122 L 1459.999 1080.983 L 1457.665 1085.04 L 1455.025 1091.541 L 1452.664 1097.015 L 1448.274 1104.39 L 1445.372 1108.341 L 1442.548 1111.577 L 1438.155 1115.791 L 1431.142 1121.182 L 1423.67 1125.754 L 1415.14 1130.203 L 1406.349 1135.142 L 1398.34 1140.841 L 1391.786 1146.919 L 1385.486 1154.862 L 1377.053 1167.584 L 1368.808 1181.998 L 1363.874 1191.443 L 1359.823 1200.232 L 1355.359 1211.413 L 1351.995 1221.126 L 1350.175 1227.855 L 1349.504 1232.777 L 1349.816 1235.469 L 1350.831 1237.732 L 1352.762 1239.274 L 1355.142 1240.132 L 1357.463 1240.405 L 1359.765 1239.488 L 1361.964 1237.304 L 1362.205 1236.897 Z"/>

                        <path className = {bulb_state ? "bulb_filler current_fill" : "bulb_filler"} 
                        d="M 0 638.8366 L 1660.9224 1541.1993 Z" clipPath = "url(#path_bulb)"/>
                    </g>
                </svg>
                <figcaption>
                    <strong className={last_text ? "roadmap_text last_roadmap_text" : "roadmap_text"}
                    ref={text_ref}>{page_title}</strong>
                </figcaption>
            </motion.figure>
            
            {!last_page &&
            <svg className = "roadmap_lines" preserveAspectRatio="none" ref={line_ref}>
                <line className={last_line ? "last_line" : ""}
                x1="50%" y1="0%" x2="50%" y2="100%" 
                vectorEffect="non-scaling-stroke"/>
            </svg>}
        </div>
    )
}